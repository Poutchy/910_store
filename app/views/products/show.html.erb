<%= link_to "Back to Products", products_path, class: "back-link" %>

<section class="product">
  <section class="product-image">
    <% if @product.featured_image.attached? %>
      <div class="product-placeholder">
        <%= image_tag @product.featured_image, alt: @product.name %>
      </div>
    <% else %>
      <div class="product-placeholder">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
      </div>
    <% end %>
  </section>

  <section class="product-info">
    <div>
      <% cache @product do %>
        <h1><%= @product.name %></h1>
        <div class="product-description">
          <%= @product.description %>
        </div>
      <% end %>

      <div class="inventory">
        <%= render "inventory", product: @product %>
      </div>
    </div>

    <% if authenticated? %>
      <div class="product-actions">
        <%= link_to "✏️ Edit", edit_product_path(@product) %>
        <%= button_to "🗑️ Delete", @product, method: :delete, data: { turbo_confirm: "Are you sure you want to delete this product?" } %>
      </div>
    <% end %>
  </section>
</section>
